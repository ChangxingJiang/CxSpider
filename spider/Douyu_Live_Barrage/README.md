# 斗鱼直播弹幕爬虫文档

> 最新有效性检查时间：2020.12.28

**爬虫类型**：循环运行爬虫

**爬虫依赖第三方模块**：crawlertool、Selenium4R、bs4

**爬虫功能**：采集斗鱼直播间弹幕中所有弹幕，依据不同类型的弹幕提取不同信息

使用Selenium打开斗鱼直播间，通过浏览器不断将Js渲染后的网页源代码传给BeautifulSoup解析弹幕

**爬虫参数**：

| 参数名   | 参数功能                                        |
| -------- | ----------------------------------------------- |
| driver   | Selenium4R.Chrome浏览器对象                     |
| live_url | 直播间地址（形如：https://www.douyu.com/96291） |
| interval | 每次循环的间隔时长（单位：秒）                  |

**爬虫返回结果数据**：

| 字段名     | 字段内容                                                     |
| ---------- | ------------------------------------------------------------ |
| type       | 弹幕类型：NOTICE=系统提示；NORMAL=正常弹幕；ENTER=观众进入提醒；MESSAGE=系统信息 |
| user_name  | 弹幕发布者名称                                               |
| user_level | 弹幕发布者等级                                               |
| content    | 弹幕内容                                                     |
| text       | 弹幕其他信息                                                 |
| fetch_time | 弹幕采集时间：因弹幕为实时采集，因此也采集时间也可以作为弹幕发布时间使用 |

**创建时间**：2019.11.24

**修改时间**：2020.12.28